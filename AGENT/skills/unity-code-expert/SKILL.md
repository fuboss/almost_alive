---
name: unity-code-expert
description: >
  Продвинутая работа с Unity C# кодом: оптимизация производительности,
  рефакторинг, написание Editor Tools (Odin), создание новых систем и модулей.
  Использовать когда нужно: (1) анализировать и оптимизировать код,
  (2) рефакторить существующие модули, (3) писать новый код по образцу,
  (4) создавать Editor Windows/Tools, (5) работать с фичами проекта.
  Стек: C# + VContainer + Odin + DOTween + UniTask + Addressables.
---

# Unity Code Expert

## Основной Workflow

**КРИТИЧНО**: Всегда работать через FileSystem MCP. Все операции с файлами — только локально.

### Порядок работы

1. **Анализ** — изучить файлы, понять контекст
2. **План** — сформулировать конкретные шаги
3. **Согласование** — показать план, дождаться подтверждения
4. **Выполнение** — только после "ок" от пользователя

### Перед началом работы

1. Проверить `PROJECT_INDEX.md` в `/Users/nikita/work/projects/genes/AGENT/`
2. Если работа над фичей — проверить/создать `AGENT/Features/X_FEATURE.md`
3. Прочитать `references/code-style.md` для соблюдения конвенций

## Типы задач

### Оптимизация производительности

```
Запрос: "Найди проблемы производительности в этих файлах"

1. Прочитать файлы через FileSystem
2. Проанализировать по чеклисту из references/optimization.md
3. Составить список проблем с приоритетами
4. Предложить план исправлений
5. ЖДАТЬ подтверждения
6. Выполнить исправления
```

### Рефакторинг

```
Запрос: "Отрефактори эту фичу"

1. Изучить все связанные файлы
2. Проверить references/patterns.md
3. Составить план рефакторинга
4. ЖДАТЬ подтверждения  
5. Выполнить рефакторинг
6. Обновить PROJECT_INDEX.md если структура изменилась
```

### Новый код по образцу

```
Запрос: "Сделай как в X, но для Y"

1. Изучить образец X
2. Понять паттерн и адаптировать для Y
3. Показать план/структуру нового кода
4. ЖДАТЬ подтверждения
5. Написать код
```

### Editor Tools (Odin)

```
Запрос: "Напиши окно для создания конфигов"

1. Уточнить требования
2. Предложить структуру окна
3. ЖДАТЬ подтверждения
4. Написать код с использованием Odin атрибутов
```

## Документация проекта

### PROJECT_INDEX.md

Поддерживать актуальным при любых изменениях структуры. См. `references/project-index-guide.md`.

### Feature документация

Для серьёзных фич вести `AGENT/Features/X_FEATURE.md`. См. `references/feature-docs-guide.md`.

## Референсы

| Файл | Когда читать |
|------|--------------|
| `references/code-style.md` | Перед написанием любого кода |
| `references/patterns.md` | При создании новых систем/модулей |
| `references/optimization.md` | При анализе производительности |
| `references/feature-docs-guide.md` | При работе над фичей |
| `references/project-index-guide.md` | При изменении структуры проекта |

## Важные правила

- **Никогда** не писать код без согласованного плана
- **Всегда** использовать FileSystem MCP для работы с файлами
- **Обновлять** PROJECT_INDEX.md при изменении структуры
- **Следовать** code-style без исключений
- **Тестировать** Editor Tools перед финализацией
