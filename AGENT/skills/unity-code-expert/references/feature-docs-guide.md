# Правила ведения Feature документации

Для каждой серьёзной фичи создавать и поддерживать файл `AGENT/Features/X_FEATURE.md`.

## Когда создавать

- Фича затрагивает 3+ файла
- Фича имеет сложную логику или состояния
- Фича будет дорабатываться в будущем
- Нужно передать контекст между сессиями работы

## Структура файла

```markdown
# [Название фичи]

## Статус
[В разработке / Готово / Требует рефакторинга]

## Описание
Краткое описание что делает фича и зачем.

## Ключевые файлы

| Файл | Роль |
|------|------|
| `Assets/Content/Scripts/X/MainClass.cs` | Основная логика |
| `Assets/Content/Scripts/X/DataClass.cs` | Модель данных |

## Архитектура

Краткое описание как компоненты взаимодействуют.

## Текущие задачи

- [ ] Задача 1
- [ ] Задача 2
- [x] Выполненная задача

## История изменений

### [Дата] — [Краткое описание]
- Что изменено
- Почему

## Заметки

Любая полезная информация для будущей работы.
```

## Пример

```markdown
# GOAP Agent System

## Статус
В разработке

## Описание
Система AI агентов на основе GOAP (Goal-Oriented Action Planning). 
Агенты автономно выбирают действия для достижения целей.

## Ключевые файлы

| Файл | Роль |
|------|------|
| `Scripts/AI/GOAP/Agent/GOAPAgent.cs` | Главный компонент агента |
| `Scripts/AI/GOAP/Agent/AgentBrain.cs` | Логика планирования |
| `Scripts/AI/GOAP/Agent/AgentBody.cs` | Физическое представление |
| `Scripts/AI/GOAP/Actions/` | Папка с действиями |

## Архитектура

```
GOAPAgent (MonoBehaviour)
├── AgentBrain — планирование, память, цели
├── AgentBody — статы, анимации, визуал
└── Interfaces
    ├── IGoapAgentCore
    ├── ITransientTargetAgent
    ├── IInventoryAgent
    └── ICampAgent
```

## Текущие задачи

- [ ] Добавить приоритизацию целей
- [ ] Оптимизировать планирование для 50+ агентов
- [x] Базовая интеграция с SimulationLoop

## История изменений

### 2024-01-15 — Рефакторинг интерфейсов
- Разделили IGoapAgent на мелкие интерфейсы
- Убрали циклические зависимости

## Заметки

- AgentBrain.Tick() вызывается в SimTick, не в Update
- transientTarget — текущая цель, может быть null
```

## Правила обновления

1. **При начале работы** — прочитать файл фичи
2. **При изменении структуры** — обновить "Ключевые файлы"
3. **При завершении задачи** — отметить в "Текущие задачи"
4. **При значимых изменениях** — добавить в "История изменений"
5. **При обнаружении нюансов** — добавить в "Заметки"
